<template name="profile">
    <div class="container">
        <div class="page-header">
            <h1>Your Profile</h1>
        </div>

      {{> userInfo}}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3>Order History</h3>
            </div>

            <div class="panel-content">
              {{> orderHistory}}
            </div>
        </div>

        <h2> Feedback History</h2>
      {{> feedbackHistory}}
        <h2> Rated Feedback</h2>
      {{> ratedFeedback}}
    </div>
</template>

<template name="userInfo">
  {{#with profile ..}}
      User: {{login}}
      <!--Name: {{name}}-->
      <!--Credit Number: {{credit_num}}-->
      <!--Address: {{address}}-->
  {{/with}}
</template>

<template name="orderHistory">
    <div class="order-history">
        <table class="table table-hover">
            <!--<caption>Books</caption>-->
            <thead>
            <tr>
                <th>ISBN</th>
                <th>Price</th>
                <th>Copies</th>
                <th>Date</th>
            </tr>
            </thead>
            <tbody>
            {{#each invoices ..}}
              {{> invoice}}
            {{/each}}
            </tbody>
        </table>
    </div>
</template>

<template name="invoice">
    <tr>
        <td>{{ISBN}}</td>
        <td>${{price}}</td>
        <td>{{copies}}</td>
        <td>{{order_date}}</td>
    </tr>
</template>

<template name="feedbackHistory">
  {{#each feedbackHistory ..}}
    {{> userFeedback}}
  {{/each}}
</template>

<template name="ratedFeedback">
  {{#each ratedFeedback ..}}
    {{> userRated}}
  {{/each}}
</template>

<template name="userFeedback">
    <div class="book-feedback details">
        <div class="feedback-detail">
        <span class="feedback-label label">
          ISBN:
        </span>
          {{ISBN}}
        </div>

        <div class="feedback-detail">
        <span class="feedback-label label">
          Score:
        </span>
          {{score}}
        </div>

        <div class="feedback-detail">
        <span class="feedback-label label">
          Feedback:
        </span>
          {{content}}
        </div>

        <div class="feedback-detail">
        <span class="feedback-label label">
          Helpfulness:
        </span>
          {{avg_rating}}
        </div>
    </div>
</template>

<template name="userRated">
    <div class="user-rated details">
        <div class="rated-detail">
        <span class="feedback-label label">
          ISBN:
        </span>
          {{ISBN}}
        </div>
        <div class="rated-detail">
        <span class="feedback-label label">
          OP:
        </span>
          {{login}}
        </div>
        <div class="rated-detail">
        <span class="feedback-label label">
          Rating:
        </span>
          {{rating}}
        </div>
    </div>
</template>
