<template name="profile">
  <div class="container profile">
    <div class="page-header">
      <h1>Your Profile</h1>
    </div>

    {{> userInfo}}

    <div class="row">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3>Order History</h3>
        </div>

        <div class="panel-content">
          {{> orderHistory}}
        </div>
      </div>
    </div>

    <div class="row">
      <h2> Feedback History</h2>
      {{> feedbackHistory}}
    </div>

    <div class="row">
      <h2> Rated Feedback</h2>
      {{> ratedFeedback}}
    </div>

  </div>
</template>

<template name="userInfo">
  {{#with profile ..}}
    <label>User</label>
    {{login}}
    <label>Name</label>
    {{name}}
    <label>Credit Number</label>
    {{credit_num}}
    <label>Address</label>
    {{address}}
  {{/with}}
</template>

<template name="feedbackHistory">
  {{#if feedbackHistory ..}}
    {{#each feedbackHistory ..}}
      {{> userFeedback}}
    {{/each}}
  {{else}}
    <span> Nothing here yet!</span>
  {{/if}}
</template>

<template name="ratedFeedback">
  {{#if ratedFeedback ..}}
    {{#each ratedFeedback ..}}
      {{> userRated}}
    {{/each}}
  {{else}}
    <span> Nothing here yet!</span>
  {{/if}}
</template>

<template name="userFeedback">
  <div class="col-sm-3">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">{{ISBN}}</h3>
      </div>
      <div class="panel-body">
        <label>Score</label>
        {{score}}
        <label>Content</label>
        {{content}}
        <label>Helpfulness</label>
        {{avg_rating}}
      </div>
    </div>
  </div>
</template>

<template name="userRated">
  <div class="col-sm-3">
    <div class="panel panel-default">
      <div class="panel-heading">
        {{ISBN}}
      </div>
      <div class="panel-body">
        <label>OP</label>
        {{login}}
        <label>Rating</label>
        {{rating}}
      </div>
    </div>
  </div>
</template>
